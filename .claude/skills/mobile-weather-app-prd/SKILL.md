---
name: mobile-weather-app-prd
description: 生成手机系统天气应用的产品需求文档（PRD）。包含完整的功能模块定义、界面设计规范、交互要求和技术实现要点。当需要为天气应用编写PRD、定义功能需求、设计天气应用功能模块、或创建天气应用产品文档时使用。
---

# 手机系统天气应用 PRD 生成技能

## 快速开始

从现在开始，**所有 PRD 输出必须严格按你的模版**（见 [`reference.md`](reference.md)）的章节顺序与表格项输出。

输出规则（非常重要）：
- **不新增自定义章节**：除非模版本身已有该章节/表格项。
- **不删除任何项目**：模版里写了“请勿删除模板中的任何项目，如未涉及，不填写即可”，因此不适用就留空/填“不适用”。
- **避免拷贝超长 base64 图片**：模版中存在 `data:image/png;base64,...` 的超长行；生成 PRD 时仅保留“图片占位/链接”，不要原样输出 base64。
- **所有模块内容的承载位置**：功能清单写在 `# 5.2功能清单` 表格；详细需求写在 `# 5.3功能详细说明`（例如 `## 5.3.1...`）。

## 模版章节骨架（按此顺序输出）

生成 PRD 时按 `PRD.md` 的主结构输出（保持标题文本一致）：
- **文档头部信息**：作者/编写时间/文档修订记录表
- **（一）需求概况**：`# **1.1需求规格信息**`（表格）
- **（二）产品PR稿（必填）**：`# **导语**`、目标用户/场景/痛点、`# 你的产品（解决方案）如何打动用户？`、`# 关键问题`
- **（三）产品策略**：`# 3.1竞品分析（选填）`、`# 3.2核心产品策略（必填）`
- **（四）产品目标（必填）**：`# 4.1验收标准`、`# 4.2MOS`
- **（五）产品方案设计**：`# 5.1产品整体示意`、`# 5.2功能清单`、`# 5.3功能详细说明`
- **（六）隐私合规与进网要求**：`# 6.1涉及个人信息的数据变化说明`、`# 6.2隐私合规自检项`、`# 6.3进网合规（内销）`
- **（七）非功能需求说明**：`# 7.1需求依赖的硬件/能力/软件`、`# 7.2埋点需求`（含 7.2.1/7.2.2）、`# 7.3运营需求`、`# 7.4升级与回落`、`# 7.5需求检查项`、`# 7.6需求相关常见问题`
- **（八）附录**：`# 8.1评审过程记录`、`# 8.2需求执行团队成员`、`# 8.3技术可行性评估`

## 天气应用内容填充指南（把内容填进模版对应位置）

- **用户洞察调研（用户故事/痛点/价值叙事必须以此为出发点）**：
  - **资料位置**：见 [`reference.md`](reference.md)。
  - **读取方式（docx）**：用 macOS 命令把 docx 转成可检索文本后再引用（用于提取人群、场景、原话）。命令见 [`reference.md`](reference.md)。

  - **样本与进入方式（写进 PR 稿更可信）**：线下座谈会 18 人；高频入口包含**负一屏/桌面天气卡/App 内**；用户普遍关注**预警、极端天气**，且有浏览**穿衣建议**习惯。
  - **核心原点用户（写用户故事时优先选这些“可落地的人群”）**：
    - **通勤/上学人群**：出门前决定穿衣/带伞/通勤方式；对“转雨/停雨时间”极敏感。
    - **活动/差旅规划人群**：周末出游、户外运动、长途旅行/出差；需要未来 7–15 天趋势、目的地建议与行李准备。
    - **户外爱好者/户外工作者**：强依赖短时变化（尤其降雨、风力、体感）；需要更细定位与更快更新。
    - **精致妈妈/亲子家庭**：关注周末天气、儿童穿衣；偏好**直观穿衣示例**与“遛娃指数”。
    - **都市银发**：更依赖预警 Push；偏好“健康关怀”类提醒（降温/风寒/过敏等），且需要更清晰的引导。
    - **地域差异**：沿海（如湛江）对台风预警更敏感；内陆（如北京）更关注空气质量，也更关注冰雹等局地强对流预警。
  - **高频场景与痛点（在 PR 稿/关键问题/用户故事里要被具体化）**：
    - **天气的核心价值是“规划与规避不确定性”**：短期（日常穿衣/带伞/通勤）+ 长期（活动/差旅）。
    - **最大挫败点是“数据不准/更新滞后”**：尤其**降雨（有无/概率/开始结束/雨量）**与**风力**；期待更细的定位（到街道/更小范围）与至少小时级更新。
    - **预警 Push 是最高价值触达**但易被通知过载淹没：需要“更醒目、更简洁、更少打扰”，只在必要时推送或支持订阅。
    - **桌面卡片信息量不足**：用户希望卡片补足逐小时趋势、降水概率、转雨/停雨时间、紫外线/风力/AQI，并更好适配主题；也需要更清晰的卡片管理引导。
    - **首页信息查找低效**：紫外线/体感/湿度/能见度等高频信息需要多次滑动；逐小时预报不直观（期望折线图与更多指标）。
    - **生活建议“要更直观、更场景化”**：穿衣建议要图示与更真实示例；场景化建议需要补齐遛娃/遛宠/更细运动类型/目的地建议等。

- **1.1 需求规格信息（表格）**：填写需求名称（如“系统天气 App 首页体验升级”/“天气应用功能完善”）、主责团队、OS版本、需求等级、上线时间、适用区域/品牌/屏幕形态等。
- **产品PR稿**：
  - **导语**：用一句话概括“更准确、更直观、更省心”的用户收益。
  - **原点用户/核心场景/痛点**：通勤出行、旅行、户外运动、空气质量敏感人群、需要灾害预警人群；痛点可覆盖“信息分散/预警不及时/定位不准/数据刷新慢”等。
  - **竞争力**：强调“系统级能力（定位、通知、桌面组件、全局搜索、深色模式/主题适配）+ 高频场景一屏直达”。
  - **关键问题**：按模版的 Q/A 结构回答。
- **3.1 竞品分析（选填，但本项目强制输出）**：
  - **强制范围**：竞品分析必须覆盖 **小米天气 / 华为天气 / 荣耀天气 / 墨迹天气**，并且必须做“同功能点”的逐项对比。
  - **对比维度建议**：交互入口易发觉性、交互路径长短、功能完整度、数据口径与丰富度（降雨/风力/预警/指数）、视觉美观性、信息架构效率（是否一屏直达/是否需要多次滑动）、卡片/组件能力（桌面/负一屏/通知）、个性化与运营内容、性能与稳定性（打开/刷新耗时、卡顿）、合规与权限策略。
  - **输出要求**：在 `# 3.1竞品分析（选填）` 下至少给出 1 张“同功能点对比表”（每个核心功能点 1 行），并补充要点结论（优势/劣势/可借鉴做法）。
  - **同功能点清单（建议最少覆盖）**：预警（入口/触达/强提醒）、降雨提醒（转雨/停雨）、空气质量卡（阈值&展示）、生活指数（穿衣/防晒/过敏/感冒/化妆等）、逐小时预报（趋势可视化&指标丰富度）、逐日/15日（趋势/列表/入口）、桌面卡片（信息量/主题适配/交互）、定位精度与刷新策略、内容质量与个性化。
- **3.2 核心产品策略（表格）**：用 3-6 条策略覆盖“信息架构一屏化”“逐小时/逐日趋势可视化”“预警触达”“空气质量与生活指数”“多城市管理”“离线与弱网体验”等。
- **4.1 验收标准/4.2 MOS**：把核心体验与性能指标写清楚（例如刷新耗时、定位成功率、卡顿率、预警到达时延等），并在 MOS 中定义规模/可用性/适配范围类指标。
- **5.2 功能清单（表格）**：将下方“功能库”拆成 Feature 行（P0/P1），并标注类型（新功能/功能优化/UI/UX/合规等）与涉及业务模块。
- **5.3 功能详细说明**：每个 Feature 用一个 `## 5.3.x` 小节描述，至少包含：目标&范围、用户流程、界面/交互、状态（加载/空/错误/弱网）、数据字段&来源、边界情况、验收标准、埋点（如适用）。
- **6.x 合规**：天气应用通常涉及定位/设备信息/推送；按表格逐项勾选是否新增权限/数据收集/SDK，并给出“情况说明/合规方案”。
- **7.x 非功能**：依赖项（GPS、网络、通知、系统主题/无障碍/折叠屏等）、埋点设计（7.2.2 表格）、运营需求（如使用技巧）、升级与回落、需求检查项（暗色/主题/无障碍/横竖屏/浮窗分屏/国际化等）。

## 功能库（用于填充 5.2 / 5.3）

### 0. 首页轮播位（运营卡/提示卡）规则（如 PRD 涉及该模块必须遵循）

**轮播位卡片类型（当前首页）**：
- **穿衣建议卡**
- **过敏生活指数运营卡**：指数等级 \(4/5\) 时展示
- **防晒卡**：指数等级 \(\ge 4\) 时展示
- **化妆卡**
- **感冒卡**：
  - 墨迹口径：指数等级 \(3/4/5\) 时展示
  - 华风口径：指数等级 \(2/3/4\) 时展示（与墨迹口径存在映射差异，PRD 需明确最终口径）
- **限行卡**
- **空气质量卡**：轻度污染及以上展示
- **降雨提醒卡**

**卡片优先级（从高到低）**：
`气象预警` > `降雨提醒` > `空气质量` > `穿衣建议` > `化妆建议` > `防晒建议` > `限行卡` > `其他`

**PRD 编写要求（写进 5.3 详细说明）**：
- **触发条件**：逐卡片写清楚“何时出现/何时不出现/口径来源（墨迹/华风）/阈值”。
- **冲突与兜底**：当多张卡同时满足条件时，按上述优先级决策；低优先级卡可被覆盖/延后；无可用卡时的兜底策略（如不展示、展示默认卡等）需在方案中明确。
- **状态与频控**：至少定义刷新时机（天气数据更新/拉取指数后）、展示频控（避免重复打扰）、以及跳转去向（点击进入二级页/指数详情/预警详情等）。

### 0.1 生活指数口径参考（轮播位/生活建议区域涉及服务变化时必须参考）

**资料来源（优先作为“口径定义/迁移对照”的依据）**：
- 资料位置见 [`reference.md`](reference.md)（华风/墨迹生活指数口径资料）。

**PRD 写法要求**：
- **必须明确“服务来源”**：华风 / 墨迹 / 双源切换（以及切换策略、灰度与回落）。
- **必须明确“等级口径”**：是“统一归一化到 1–5 级”，还是“沿用供应商原生等级/文案”（例如墨迹的穿衣/化妆并非固定 1–5）。
- **阈值写清楚映射**：像“指数等级 ≥4 展示”这类规则，PRD 必须写出：
  - 该指数在当前服务下的**等级枚举/含义**（例如华风：强/极强；墨迹：4级=易发），以及
  - 是否需要“华风 ↔ 墨迹”的等级映射表（例如你前面提到感冒：墨迹 3/4/5 对应华风 2/3/4）。

**华风（可直接用于 PRD 的等级文案示例）**：
- **防晒指数（5 档）**：弱/较弱/中等/强/极强（提示语：轻度防晒/适当防晒/中等防晒/增强防晒/加强防护）
- **感冒指数（4 档）**：少发/较易发/易发/极易发（提示语：感冒少发/感冒易发）
- **穿衣指数（7 档）**：盛夏装/夏装/春秋装/早春晚秋装/初冬装/冬装/严冬装（提示语：宜穿短袖/薄外套/外套/大衣/棉衣/羽绒服）
- **化妆指数（多档）**：保湿/滋润保湿/防晒/去油/去油防晒/防脱水/防脱水防晒/保湿防晒…（提示语：脸部保湿/防晒/控油/保湿防晒…）

**墨迹（目录&等级体系提示）**：
- **息斯敏过敏指数（1–5 级）**：1=极不易发，2=不易发，3=较易发，4=易发，5=极易发
- **感冒指数（1–5 级）**：1=少发，2=可能，3=较易发，4=易发，5=不宜
- **穿衣指数（并非 1–5，存在 1–10 级与同级多提示语的情况）**：示例见原资料（PRD 里不要想当然用“4/5”去判断，除非你们做了归一化）
- **化妆指数（并非 1–5，存在 1–11 等多档枚举）**：示例见原资料（同上，阈值规则需先口径化）

### 0.2 气象预警类型枚举参考（涉及预警相关需求必须调用）

**资料来源**：
- 资料位置见 [`reference.md`](reference.md)（预警类型枚举）。

**PRD 必须做到**：
- **预警类型与等级不拍脑袋**：所有“预警类型（如暴雨/台风/大风…）”与“预警等级/颜色（蓝/黄/橙/红/白…）”的枚举与展示策略，必须引用该文档作为口径。
- **写清字段口径**：在 `5.3 功能详细说明` 中，明确预警卡/预警列表/预警详情所依赖的字段（至少：`type`、`level/color`、`title`、`content`、`effectiveTime`、`expireTime`、`region`、`publisher`、`status`）。
- **与轮播位优先级一致**：若首页轮播位涉及预警卡，必须遵循轮播位优先级规则：`气象预警` 永远最高优先级。

**常见预警类型（来自枚举，用于写用户故事/验收用例覆盖）**：
暴雪、暴雨、冰雹、持续低温、持续高温、大风、大雾、大雪、道路冰雪、道路结冰、地质灾害气象风险、低温、干旱、干热风、高温、海上大风、海上大雾、海上雷雨大风、寒潮、寒冷、灰霾/霾、火险/森林（草原）火险、降温、雷暴/雷电/雷雨大风/雷暴大风、强对流、强降雨、沙尘/沙尘暴、霜冻、台风、雪灾、重污染、未知等（以文档为准）。

### 1. 当前天气概览

**功能描述**：
- 显示当前位置的当前温度（大字号居中）
- 显示今日温度范围（最高/最低）
- 显示当前空气质量等级和AQI指数
- 显示天气预警信息（如有）

**数据字段**：
- `currentTemp`: 当前温度（数字）
- `maxTemp`: 今日最高温度
- `minTemp`: 今日最低温度
- `aqi`: 空气质量指数
- `aqiLevel`: 空气质量等级（优/良/轻度污染等）
- `weatherAlert`: 天气预警信息（可选）

**设计要求**：
- 温度数字使用大字号（48-72px），居中显示
- 温度范围使用较小字号，显示在温度下方
- 空气质量信息使用卡片式设计，半透明背景
- 预警信息使用醒目的颜色（黄色/红色）和图标

### 2. 逐小时天气预报

**功能描述**：
- 横向滚动展示未来24小时的逐小时预报
- 显示时间、天气图标、温度
- 支持滑动查看更多小时

**数据字段**：
- `hourlyForecast`: 数组，每项包含：
  - `time`: 时间（如"14:00"或"现在"）
  - `icon`: 天气图标
  - `temp`: 温度
  - `weather`: 天气状况描述

**设计要求**：
- 卡片式模块，圆角边框
- 横向滚动，支持滑动
- 每小时信息垂直排列：时间、图标、温度
- "现在"标签特殊高亮显示

**交互要求**：
- 支持左右滑动查看更多小时
- 点击某小时可查看详情（可选）

### 3. 每日天气预报

**功能描述**：
- 列表展示未来多日天气预报（默认7天）
- 显示日期、星期、天气图标、温度范围
- 提供查看15日预报的入口

**数据字段**：
- `dailyForecast`: 数组，每项包含：
  - `date`: 日期（如"1月23日"）
  - `weekday`: 星期（如"周五"）
  - `icon`: 天气图标
  - `maxTemp`: 最高温度
  - `minTemp`: 最低温度
  - `weather`: 天气状况

**设计要求**：
- 列表式布局，每行显示一天
- 日期和星期左对齐，温度右对齐
- 天气图标居中或左侧
- 底部提供"未来15日天气预报"按钮

**交互要求**：
- 点击某一天可查看详情
- 点击"未来15日"按钮展开更多天数

### 4. 空气质量详情

**功能描述**：
- 显示空气质量等级和AQI数值
- 显示空气质量描述文字
- 显示空气质量进度条（可视化）

**数据字段**：
- `aqi`: 空气质量指数（0-500）
- `aqiLevel`: 等级（优/良/轻度污染/中度污染/重度污染/严重污染）
- `description`: 描述文字
- `pm25`, `pm10`, `o3`, `no2`, `so2`, `co`: 各项污染物浓度（可选）

**设计要求**：
- 独立卡片模块
- 大字号显示等级和数值
- 彩色进度条：绿色（优）→ 黄色（良）→ 橙色（轻度）→ 红色（重度）
- 描述文字使用较小字号

### 5. 详细气象数据

**功能描述**：
- 网格布局展示6项气象数据
- 每项显示：图标、名称、数值

**数据项**：
1. **紫外线指数** - 数值 + 等级（弱/中等/强/很强）
2. **体感温度** - 温度数值
3. **湿度** - 百分比
4. **风力** - 风速 + 风向
5. **气压** - 百帕数值
6. **能见度** - 千米数值

**设计要求**：
- 2行3列网格布局
- 每个卡片包含：左上角图标、标题、大字号数值
- 统一卡片样式，圆角、半透明背景

### 6. 日出日落时间

**功能描述**：
- 横向进度条样式展示
- 左侧显示日出时间，右侧显示日落时间
- 中间太阳图标根据当前时间位置移动

**数据字段**：
- `sunrise`: 日出时间（HH:mm格式）
- `sunset`: 日落时间（HH:mm格式）
- `currentTime`: 当前时间（用于计算太阳位置）

**设计要求**：
- 进度条样式，从左到右
- 太阳图标根据时间在进度条上移动
- 时间显示在两端

### 7. 生活建议/指数

**功能描述**：
- 网格布局展示9项生活建议
- 每项包含图标和文字描述

**建议项**（根据实际需求调整）：
1. 穿衣建议（如"首穿外套"）
2. 带伞建议（如"适当带伞"）
3. 护肤建议（如"脸部控油"）
4. 疾病易发提示（如"很易发"）
5. 洗车建议（如"不宜洗车"）
6. 运动建议（如"适宜户外活动"）
7. 交通状况（如"交通条件良好"）
8. 其他指数（根据需求）
9. 钓鱼指数（如"较适宜钓鱼"）

**设计要求**：
- 3行3列网格布局
- 每个卡片包含图标和文字
- 统一卡片样式

### 8. 位置管理

**功能描述**：
- 显示当前位置名称（如"南山区"）
- 支持切换城市/位置
- 支持添加多个城市

**交互要求**：
- 点击位置名称可切换城市
- 支持搜索添加新城市
- 支持删除已添加的城市

### 9. 天气预警

**功能描述**：
- 显示当前生效的天气预警
- 预警类型：寒冷、暴雨、台风、高温等
- 预警等级：蓝色、黄色、橙色、红色

**设计要求**：
- 醒目的颜色和图标
- 预警文字清晰易读
- 点击可查看预警详情

## 界面设计规范

### 整体风格
- **背景**：蓝色渐变（顶部较亮，底部略深），营造天空氛围
- **卡片设计**：圆角边框（8-12px），半透明背景（rgba白色，透明度0.1-0.2）
- **文字颜色**：主要使用白色和浅灰色，与蓝色背景形成对比
- **图标风格**：线性、扁平化设计

### 字体规范
- **大标题**：48-72px，粗体
- **标题**：24-32px，中等粗细
- **正文**：16-18px，常规
- **辅助文字**：12-14px，浅色

### 间距规范
- **卡片间距**：16-24px
- **内容内边距**：16-20px
- **元素间距**：8-12px

### 颜色规范
- **主色调**：蓝色渐变（#4A90E2 → #2E5C8A）
- **强调色**：橙色（温度）、绿色（空气质量优）、黄色（预警）
- **文字色**：白色（#FFFFFF）、浅灰色（#E0E0E0）

## 交互规范

### 通用交互
- **点击反馈**：所有可点击元素提供视觉反馈（高亮/缩放）
- **加载状态**：数据加载时显示骨架屏
- **错误处理**：网络错误时显示友好提示和重试按钮
- **下拉刷新**：主页面支持下拉刷新数据

### 滚动交互
- **逐小时模块**：横向滚动，支持滑动
- **主页面**：纵向滚动，支持下拉刷新
- **列表模块**：纵向滚动，支持上拉加载更多

### 导航交互
- **返回**：详情页支持返回主页面
- **切换**：支持在不同视图间切换（如逐日模块的图表/列表切换）

## 技术实现要点

### 数据获取
- 使用天气API获取实时数据
- 实现数据缓存机制（避免频繁请求）
- 处理API限流和错误情况

### 性能优化
- 图片懒加载
- 列表虚拟滚动（如15日列表）
- 图表使用轻量级库（如ECharts、Chart.js）

### 状态管理
- 使用状态管理库（Redux/Vuex/Zustand等）
- 管理位置列表、当前选中位置、视图偏好等

### 本地存储
- 存储用户添加的城市列表
- 存储视图偏好（如逐日模块的图表/列表选择）
- 存储最后更新时间（用于判断是否需要刷新）

## 数据埋点

### 关键指标
- 页面访问量（PV）
- 用户访问量（UV）
- 各模块点击率
- 功能使用率（如查看15日预报）
- 位置切换频率

### 埋点事件
- `page_view` - 页面访问
- `location_switch` - 切换位置
- `hourly_forecast_view` - 查看逐小时预报
- `daily_forecast_view` - 查看逐日预报
- `aqi_detail_view` - 查看空气质量详情
- `life_index_view` - 查看生活指数
- `alert_click` - 点击天气预警
- `refresh_data` - 刷新数据

## 边界情况处理

### 无数据情况
- 显示友好的空状态提示
- 提供重试按钮
- 显示最后更新时间

### 网络错误
- 显示网络错误提示
- 提供重试功能
- 使用缓存数据（如有）

### 定位失败
- 提示用户手动选择位置
- 提供位置搜索功能
- 使用默认位置（如上次选择的位置）

### 数据过期
- 显示数据更新时间
- 提示用户刷新数据
- 自动刷新机制（如每30分钟）

## 开发检查清单

### 功能完整性
- [ ] 当前天气概览模块
- [ ] 逐小时天气预报模块
- [ ] 每日天气预报模块
- [ ] 空气质量详情模块
- [ ] 详细气象数据模块
- [ ] 日出日落时间模块
- [ ] 生活建议/指数模块
- [ ] 位置管理功能
- [ ] 天气预警功能

### 交互体验
- [ ] 所有可点击元素有反馈
- [ ] 加载状态处理
- [ ] 错误状态处理
- [ ] 空状态处理
- [ ] 下拉刷新功能
- [ ] 滑动交互流畅

### 性能优化
- [ ] 图片懒加载
- [ ] 数据缓存
- [ ] 列表虚拟滚动
- [ ] API请求优化

### 数据埋点
- [ ] 关键事件埋点
- [ ] 页面访问统计
- [ ] 功能使用统计

## 使用示例

**示例1：生成完整PRD**
```
用户：帮我生成手机系统天气应用的PRD
→ 使用此技能生成完整的PRD文档，包含所有功能模块
```

**示例2：补充特定模块**
```
用户：在PRD中添加逐小时预报模块的详细需求
→ 使用此技能中的"逐小时天气预报"模块定义补充文档
```

**示例3：设计规范查询**
```
用户：天气应用的界面设计规范是什么？
→ 返回"界面设计规范"章节内容
```
